{% extends 'base.html' %}
{% load static %}

{% block title %}Destinations - Travello{% endblock %}

{% block content %}
    <!-- Header -->
    {% include 'includes/header.html' %}

    <!-- Destinations Section -->
    <div class="destinations" style="padding: 100px 0;">
        <div class="container">
            <div class="row">
                <div class="col text-center">
                    <h1 class="section_title">Amazing Destinations</h1>
                    <p class="section_subtitle">Explore all Available Destinations</p>
                </div>
            </div>
            <div class="row destinations_row" style="margin-top: 50px;">
                {% for destination in destinations %}
                <div class="col-lg-4 col-md-6 col-sm-6">
                    <div class="destination_item" style="margin-bottom: 30px;">
                        <div class="destination_image">
                            <img src="{{ destination.img.url }}" alt="{{ destination.name }}" style="width: 100%; height: 250px; object-fit: cover; border-radius: 10px;">
                            {% if destination.offer %}
                                <div class="spec_offer text-center">
                                    <a href="{% url 'destination_detail' destination.pk %}">Special Offer</a>
                                </div>
                            {% endif %}
                        </div>
                        <div class="destination_content" style="padding: 20px;">
                            <h3 class="destination_title"><a href="{% url 'destination_detail' destination.pk %}">{{ destination.name }}</a></h3>
                            <p class="destination_text">{{ destination.desc|truncatewords:20 }}</p>
                            <div class="destination_price">
                                <span class="price">${{ destination.price }}</span>
                                <span class="price_per">per person</span>
                            </div>
                            <div class="destination_buttons" style="margin-top: 15px;">
                                <a href="{% url 'destination_detail' destination.pk %}" class="btn btn-outline-primary">View Details</a>
                                {% if user.is_authenticated %}
                                    <a href="{% url 'book_destination' destination.pk %}" class="btn btn-primary">Book Now</a>
                                {% else %}
                                    <a href="{% url 'login' %}?next={% url 'book_destination' destination.pk %}" class="btn btn-primary">Login to Book</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-12 text-center">
                    <p>No destinations available at the moment.</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

<style>
.destination_item {
    background: white;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    overflow: hidden;
    transition: transform 0.3s ease;
}

.destination_item:hover {
    transform: translateY(-5px);
}

.destination_title a {
    color: #333;
    text-decoration: none;
    font-weight: 600;
}

.destination_title a:hover {
    color: #007bff;
}

.destination_price {
    margin: 15px 0;
}

.price {
    font-size: 24px;
    font-weight: 700;
    color: #007bff;
}

.price_per {
    color: #666;
    font-size: 14px;
}

.spec_offer {
    position: absolute;
    top: 20px;
    right: 20px;
    background: #ff4757;
    color: white;
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
}

.spec_offer a {
    color: white;
    text-decoration: none;
}

.section_title {
    font-size: 48px;
    font-weight: 300;
    margin-bottom: 20px;
}

.section_subtitle {
    font-size: 18px;
    color: #666;
}
</style>
{% endblock %}
